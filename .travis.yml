sudo: required
dist: trusty
addons:
  sonarcloud:
    organization: garethahealy-github
    token:
      secure: "MCbZ/4sdZ5nEvrdT2UJG7FvAqgonmsPpAkrRuB/jry+4WfoBiwg2mNmz2rN5oq7rD9xnqkQaE0q8CFscIi5ySrpiZajYnG3hlWsOFYrx22Uil8ADk52/U6CC8dBFfnC1dzafF4E8osbmKGAiZldsRvEi2imw3mfxUyoy37nIklE="
language: java
jdk:
- oraclejdk8
install:
- mvn -N io.takari:maven:wrapper -Dmaven=3.5.0
- java -version && javac -version && ./mvnw -version -B
- ./mvnw install:install-file -B -Dfile=microsoft-sqlserver-sqljdbc4/lib/sqljdbc41.jar -Dpackaging=jar -DgroupId=com.microsoft.sqlserver -DartifactId=sqljdbc4 -Dversion=4.1
before_script:
- ./mvnw dependency:go-offline -B
script:
- ./mvnw clean install -B -Dgpg.skip=true
- ./mvnw clean org.jacoco:jacoco-maven-plugin:prepare-agent package sonar:sonar -B
cache:
  directories:
  - $HOME/.m2
  - $HOME/.victims
